## token & session

### Session 이란?

- Client 와 Sever가 서로 통신하는 경로를 뜻한다
- 네트워크에서는 두 대의 시스템간의 활성화된 접속을 의마한다.

## Web Session 의 특징

* Client는 Web Site에 접속하게 되면 Sever와 TCP특성인 3way-handshaking을 하게 된다.
* 신뢰단계를 유지하고 접속을 지속적으로 연결하겠다는 것이지만
* 웹은 사용자가 요청해야지만 정보를 보내주는 특성 때문에 TCP의 지속적인 연결한 성격을 잃어 버린다. 
* 비 연속적으로 접근하는 웹 사용자를 구분하기 위해 Session Token을 사용한다.

### Session Token 이란?

\- Session 을 인증하기 위한 정보이다.

\- Client 와 Server가 서로 신뢰하며 통신할 수 있도록 인증하는 키

\- 인증에 관련 된 정보는 Server와 Client 양쪽에 저장되어야 한다.



### Session Management 절차

**1. Request** : 사용자가 웹 사이트(웹 서버) 에 접속한다고 요청을 보낸 메세지

**2. Session Token 생성 :** 사용자가 접속한다는 Request를 보냈기 때문에 접속할 수 있는 Session Token을 생성

**3. Response :** 서버가 생성한 Session Token을 전송

**4. Session Token 저장 :** 사용자가 Session Token을 받고 저장



### 토큰 기반의 인증 시스템

토큰 기반의 인증 시스템은 인증받은 사용자들에게 토큰을 발급하고, 서버에 요청을 할 때 헤더에 토큰을 함께 보내도록 하여 유효성 검사를 한다. 이러한 시스템에서는 더이상 사용자의 인증 정보를 서버나 세션에 유지하지 않고 클라이언트 측에서 들어오는 요청만으로 작업을 처리한다. 즉, 서버 기반의 인증 시스템과 달리 상태를 유지하지 않으므로 Stateless한 구조를 갖는다. 이러한 토큰 기반의 인증 방식을 통해 수많은 문제점들을 해결할 수 있는데, 대표적으로 사용자가 로그인이 되어있는지 안되어있는지 신경쓰지 않고 손쉽게 시스템을 확장할 수 있다.

 

### 토큰 기반 인증 시스템의 이점

1. 무상태성 & 확장성 
   * 토큰은 클라이언트 측에 저장되기 때문에 서버는 완전하며, 클라이언트와 서버의 연결고리가 없기 때문에 확장하기 매우 적합하다. 
2. 보안성 
   * 클라이언트가 서버로 요청을 보낼 때 더 이상 쿠키를 전달하지 않으므로, 쿠키 사용에 의한 취약점이 사라지게 된다.
3. 확장성
   * 토큰 기반의 인증 시스템에서는 토큰에 선택적인 권한만 부여하여 발급할 수 있으며 OAuth의 경우 Facebook, Google 등과 같은 소셜 계정을 이용하여 다른 웹서비스에서도 로그인을 할 수 있다.
4. 여러 플랫폼 및 도메인 
   * 토큰을 사용한다면 어떤 디바이스, 어떤 도메인에서도 토큰의 유효성 검사를 진행한 후에 요청을 처리할 수 있다. 이런 구조를 통해 assests 파일(Image, html, css, js 등)은 모두 CDN에서 제공하고, 서버 측에서는 API만 다루도록 설게할 수 있다.

